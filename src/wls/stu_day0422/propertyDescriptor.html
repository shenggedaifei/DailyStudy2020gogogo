<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<script type="text/javascript">
			/*
			 * 属性特性： 
			 * 	·数据属性：value、writable、enumerable、configurable
			 * 	·存取器属性：get（取代value）、set（取代writable）、enumerable、configurable
			 属性描述符对象：property descriptor
			 	描述某个属性具有的特性。
			 */
			//通过Object.getOwnPropertyDescriptor()获取某个对象指定属性的属性描述符对象
			//注意对于继承属性和不存在的属性，都会返回undefined
			var prodes = Object.getOwnPropertyDescriptor({x:1}, "x");
			console.log(prodes);
			console.log(typeof prodes);
			
			/*
			 * 设置属性特性：defineProperty()
			 * 	`注意：这个方法要么修改已有属性，要么新建自有属性，不能修改继承属性。
			 * 
			 * 如果要同时修改或创建多个属性，就需要用defineProperties()
			 * 	两个参数：
			 * 			第一个参数是要修改的对象；
			 * 			第二个参数是一个映射表：包含新建或修改的属性名以及属性描述符对象
			 */
			//1.添加一个不可枚举的属性
			var obj = {};
			Object.defineProperty(obj, "name", {
				value: 'zhangsan',
				writable: false,
				enumerable: false,
				configurable: true
			});
			obj.name = "lisi";//值没有改变，因为writable属性为false
			console.log(obj.name);
			//2.数据属性修改为存取器属性
			Object.defineProperty(obj, "name", {get: function(){return 0;}});
			console.log(obj.name);
			
			//defineProperties({}, {})
			Object.defineProperties(obj,{
				name: {value: "zhangsan", writable: true, enumerable: true, configurable: true},
				age: {value: 18, writable: true, enumerable: true, configurable: true},
				gender: {value: "男"}
			});
			console.log(obj.name+"————"+obj.age+"——————"+obj.gender);
		</script>
		<script type="text/javascript">
			//复制属性特性
			Object.defineProperty(Object.prototype,"extend",{
				writable: true,
				enumerable: false,
				configurable: true,
				value: function(o) {//值就是这个函数
					//得到所有自有属性，包括不可枚举属性
					var names = Object.getOwnPropertyNames(o);
					//方法返回一个由指定对象的所有自身属性的属性名（包括不可枚举属性但不包括Symbol值作为名称的属性）组成的数组。
					for (var i = 0; i < names.length; i++) {
						//如果属性存在，就跳过
						if (names[i] in this) {
							continue;
						}
						//获得o中的属性的描述符
						var desc = Object.getOwnPropertyDescriptor(o, names[i]);
						//用它给this创建属性
						Object.defineProperty(this, names[i], desc);
					}
				}
			});
		</script>
	</head>
	<body>
		
	</body>
</html>
